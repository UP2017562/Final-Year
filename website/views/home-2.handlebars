<section class="home-container">
    <div class="big-box">
        <h1>Welcome to testing</h1>
        <p>This box covers the webpage and can be customized!</p>
    </div>
    <form action="/go" method="post" class="url-input">
        <label for="url">Insert your URL here:</label>
        <input type="text" id="url" name="url" placeholder="Enter URL...">
        <button type="submit" class="go-button">Go!</button>
    </form>
    <!-- Add iframe for displaying the fetched source code -->
    <iframe id="source-preview" width="80%" height="600" style="border: 1px solid #ccc;"></iframe>
</section>

<script>
    // Listen for form submission
    document.querySelector('.url-input').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form from reloading the page
        const url = document.querySelector('#url').value; // Get URL input value

        // Send POST request to the server
        fetch('/go', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ url }) // Send the URL to the server
        })
        .then(response => response.text()) // Get the response as plain text
        .then(data => {
            // Inject the source code into the iframe
            const iframe = document.getElementById('source-preview');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            iframeDoc.open();
            iframeDoc.write(data); // Write the fetched HTML into the iframe
            iframeDoc.close();
        })
        .catch(error => {
            console.error('Error loading source into iframe:', error);
        });
    });
</script>
