<section class="home-container">
    <div class="big-box">
        <h1>Welcome to testing</h1>
        <p>This box covers the webpage and can be customized!</p>
    </div>
    <form action="/go" method="post" class="url-input">
        <label for="url">Insert your URL here:</label>
        <input type="text" id="url" name="url" placeholder="Enter URL...">
        <button type="submit" class="go-button">Go!</button>
    </form>
    <!-- Add iframe for displaying the fetched source code -->
    <iframe id="source-preview" width="80%" height="600" style="border: 1px solid #ccc;"></iframe>
</section>

<script>
    document.querySelector('.url-input').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form submission
        const url = document.querySelector('#url').value; // Get URL from the form

        // Fetch the source code from the server
        fetch('/go', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ url }) // Send the URL to the server
        })
        .then(response => response.text()) // Get the source code as plain text
        .then(data => {
            const iframe = document.getElementById('source-preview');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

            // Write the source code into the iframe
            iframeDoc.open();
            iframeDoc.write(data);

            // Inject custom styles for accessibility
            const style = iframeDoc.createElement('style');
            style.textContent = `
                body {
                    font-family: Arial, sans-serif; /* Set default font */
                    font-size: 16px; /* Adjust font size */
                    color: #ffffff; /* Text color */
                    background-color: #000000; /* Background color for high contrast */
                }
                a {
                    color: #1e90ff; /* Accessible link color */
                }
            `;
            iframeDoc.head.appendChild(style); // Add the style block to the iframe

            iframeDoc.close();
        })
        .catch(error => console.error('Error loading source into iframe:', error));
    });
</script>

